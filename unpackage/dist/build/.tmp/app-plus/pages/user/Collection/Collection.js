(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/Collection/Collection"],{"01ed":function(t,e,a){"use strict";a.r(e);var n=a("c316"),o=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"15c6":function(t,e,a){"use strict";var n=a("18db"),o=a.n(n);o.a},"18db":function(t,e,a){},"1b2e":function(t,e,a){"use strict";a.r(e);var n=a("7b59"),o=a("01ed");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("15c6");var u=a("2877"),i=Object(u["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=i.exports},7081:function(t,e,a){"use strict";(function(t){a("273e"),a("921b");n(a("66fd"));var e=n(a("1b2e"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"7b59":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},c316:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("9a0e"),o=function(){return a.e("components/uni-load-more/uni-load-more").then(a.bind(null,"71af"))},s={components:{uniLoadMore:o},data:function(){return{empty:!1,cartList:[],hasLogin:!1,userInfo:{},status:"more",loadingText:"加载中...",loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},pageIndex:null,totalPages:null}},onShow:function(){var e=this;t.getStorage({key:"userInfo",success:function(t){e.userInfo=t.data,e.pLevel=t.data.customer.pLevel},fail:function(t){t.data}}),t.getStorage({key:"hasLogin",success:function(t){e.hasLogin=t.data},fail:function(t){""==t.data&&(e.hasLogin=!1)}}),this.loaddata()},watch:{cartList:function(t){var e=0===t.length;this.empty!==e&&(this.empty=e)}},methods:{loaddata:function(){var e=this;t.request({url:n.api+"/api/CustomerCollect/QueryCustomerCollect",method:"POST",header:{Authorization:e.userInfo.token_type+" "+e.userInfo.access_token},data:{pageIndex:1,pageSize:6,sortBy:"Sc_TimeCreated",sortType:"desc"},success:function(a){a.data.statusCode==n.requestsuccess&&(e.cartList=a.data.data.items,e.pageIndex=a.data.data.pageIndex,e.totalPages=a.data.data.totalPages,1!=a.data.data.totalPages?e.status="more":e.status="hidetext",t.stopPullDownRefresh())}})},onPullDownRefresh:function(){this.loaddata()},onReachBottom:function(){var e=this;e.pageIndex<=e.totalPages?(t.showNavigationBarLoading(),t.request({url:n.api+"/api/CustomerCollect/QueryCustomerCollect",method:"POST",header:{Authorization:e.userInfo.token_type+" "+e.userInfo.access_token},data:{pageIndex:e.pageIndex+1,pageSize:6,sortBy:"Sc_TimeCreated",sortType:"desc"},success:function(a){if(a.data.data.items.length<=0)return e.loadingType=2,e.status="noMore",void t.hideNavigationBarLoading();e.pageIndex++,e.cartList=e.cartList.concat(a.data.data.items),e.loadingType=0,t.hideNavigationBarLoading()}})):e.status="noMore"},deleteCartItem:function(e,a){var o=this;t.showModal({content:"确定将这个宝贝移出收藏夹？",success:function(a){a.confirm&&t.request({url:n.api+"/api/CustomerCollect/DeleteCustomerCollect?style="+e.style,method:"POST",header:{Authorization:o.userInfo.token_type+" "+o.userInfo.access_token},success:function(t){t.data.statusCode==n.requestsuccess&&(o.$api.msg("取消收藏成功！"),o.loaddata())}})}})}}};e.default=s}).call(this,a("6e42")["default"])}},[["7081","common/runtime","common/vendor"]]]);