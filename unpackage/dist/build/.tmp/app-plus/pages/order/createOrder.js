(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"189e":function(t,e,a){"use strict";(function(t){a("273e"),a("921b");r(a("66fd"));var e=r(a("69d2"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"2c57":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a("9a0e"),s={data:function(){return{desc:"",payType:1,addressData:{},userInfo:{},tempaddressData:{},totoalprice:0,store:"",cartList:[],tempdata:{}}},onShow:function(){var e=this;t.getStorage({key:"cartList",success:function(t){e.cartList=t.data,e.totoalprice=0,e.cartList.forEach(function(t){t.checked&&(e.totoalprice+=t.orderQty*t.orderPrice,e.totoalprice=Number(e.totoalprice.toFixed(2)))})}}),t.getStorage({key:"userInfo",success:function(t){e.userInfo=t.data,e.pLevel=t.data.customer.pLevel},fail:function(t){t.data}}),t.request({url:r.api+"/api/Order/GetStores",header:{Authorization:e.userInfo.token_type+" "+e.userInfo.access_token},success:function(a){a.data.statusCode==r.requestsuccess&&(e.tempaddressData=a.data.data[0],t.getStorage({key:"addressData",success:function(t){e.addressData=t.data,e.store=t.data.store},fail:function(t){""==t.data&&(e.addressData=e.tempaddressData,e.store=e.tempaddressData.store)}}))}})},methods:{submit:function(){var e=this,a=[];e.tempdata.store=e.addressData.store,e.cartList.forEach(function(t){t.checked&&a.push({style:t.styleID,itemNo:t.itemNo,orderQty:t.orderQty,orderPrice:t.orderPrice})}),e.tempdata.styles=a,t.request({url:r.api+"/api/Order/AddOrder",header:{Authorization:e.userInfo.token_type+" "+e.userInfo.access_token},method:"POST",data:e.tempdata,success:function(a){a.data.statusCode==r.requestsuccess?t.showModal({content:"订单创建成功",showCancel:!1,success:function(a){if(1==a.confirm){var r=e.cartList.filter(function(t){return!e.tempdata.styles.some(function(e){return e.style===t.styleID&&e.itemNo===t.itemNo&&e.orderQty===t.orderQty&&e.orderPrice===t.orderPrice})});t.setStorage({key:"cartList",data:r}),t.redirectTo({url:"../user/orderlist/orderlist"})}}}):t.showToast({title:a.data.msg,duration:2e3})}})}}};e.default=s}).call(this,a("6e42")["default"])},"5d19":function(t,e,a){"use strict";a.r(e);var r=a("2c57"),s=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);e["default"]=s.a},"69d2":function(t,e,a){"use strict";a.r(e);var r=a("a254"),s=a("5d19");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a("fdcc");var n=a("2877"),c=Object(n["a"])(s["default"],r["a"],r["b"],!1,null,null,null);e["default"]=c.exports},"6a6e":function(t,e,a){},a254:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"a",function(){return r}),a.d(e,"b",function(){return s})},fdcc:function(t,e,a){"use strict";var r=a("6a6e"),s=a.n(r);s.a}},[["189e","common/runtime","common/vendor"]]]);